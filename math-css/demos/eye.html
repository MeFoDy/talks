<!-- https://codepen.io/dark_mefody/pen/yyyrQgV -->

<!-- Based on https://cssanimation.rocks/spheres/ -->

<section class="stage">
    <figure class="ball">
        <span class="shadow"></span>
        <span class="iris"></span>
    </figure>
</section>

<style>
    .ball {
        display: inline-block;
        width: 100%;
        height: 100%;
        margin: 0;
        border-radius: 50%;
        position: relative;
        background: radial-gradient(circle at 50% 40%,
                #fcfcfc,
                #efeff1 66%,
                #9b5050 100%);
    }

    .ball::after {
        content: "";
        position: absolute;
        top: 5%;
        left: 10%;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background: radial-gradient(circle at 50% 50%,
                rgba(255, 255, 255, 0.8),
                rgba(255, 255, 255, 0.8) 14%,
                rgba(255, 255, 255, 0) 24%);
        transform: translateX(-80px) translateY(-90px) skewX(-20deg);
    }

    .iris {
        --angle: atan2(var(--cursor-x) - var(--cx), var(--cursor-y) - var(--cy));
        --x: calc((var(--cursor-x) - var(--cx)) / var(--cx));
        --y: calc((var(--cursor-y) - var(--cy)) / var(--cy));
        --scale: calc(0.2 * hypot(var(--cursor-y) - var(--cy), var(--cursor-x) - var(--cx)) / hypot(var(--cy), var(--cx)));
        width: 40%;
        height: 40%;
        margin: 30%;
        border-radius: 50%;
        background: radial-gradient(circle at 50% 50%,
                #208ab4 0%,
                #6fbfff 30%,
                #4381b2 100%);
        scale: 1 calc(1 - var(--scale));
        translate: calc(var(--x) * 50%) calc(var(--y) * 50%);
        rotate: calc(-1 * var(--angle));
        position: absolute;
    }

    .iris::before {
        content: "";
        display: block;
        position: absolute;
        width: 37.5%;
        height: 37.5%;
        border-radius: 50%;
        top: 31.25%;
        left: 31.25%;
        background: black;
    }

    .ball .shadow {
        position: absolute;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 50% 50%,
                rgba(0, 0, 0, 0.4),
                rgba(0, 0, 0, 0.1) 40%,
                rgba(0, 0, 0, 0) 50%);
        transform: rotateX(90deg) translateZ(-150px);
        z-index: -1;
    }

    .stage {
        width: 300px;
        height: 300px;
        display: inline-block;
        margin: 20px;
        perspective: 1200px;
        perspective-origin: 50% 50%;
        transform-style: preserve-3d;
        transform: rotateY(0.01deg);
    }

    body {
        width: 100vw;
        height: 100vh;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(to bottom,
                rgba(100, 100, 100, 0.1) 0%,
                rgba(255, 255, 255, 0.1) 40%,
                rgba(255, 255, 255, 0.3) 100%);
        background-repeat: no-repeat;
    }
</style>

<script>
    const ball = document.querySelector('.ball');

    function tellPos(p) {
        const viewportOffset = ball.getBoundingClientRect();
        const cy = viewportOffset.top + viewportOffset.height / 2;
        const cx = viewportOffset.left + viewportOffset.width / 2;
        ball.style = `--cx: ${cx}; --cy: ${cy}; --cursor-x: ${p.pageX}; --cursor-y: ${p.pageY}`;
    }

    addEventListener("mousemove", tellPos, false);
</script>
