<!DOCTYPE html>
<html lang="ru">

<head>
    <title>JS Decorators — приоденьте свой код</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../src/shower/themes/ribbon/styles/screen-16x10.css">
    <link rel="stylesheet" href="../src/prism/prism.min.css">
    <link rel="stylesheet" href="style.css?v=0.0.1">
</head>

<body class="shower list">

    <header class="caption">
        <h1>JS Decorators — приоденьте свой код</h1>
        <p>
            <a href="https://twitter.com/dark_mefody">Никита Дубко</a>, iTechArt Group
        </p>
    </header>

    <section class="slide clear" id="cover">
        <h2>
            <span style="color: #C10D0E">JS Decorators</span> —
            <br>
            <span style="color: #DDAF25;">приоденьте свой код</span>
        </h2>
        <hr>
        <p>
            <a href="https://twitter.com/dark_mefody">Никита Дубко</a>, iTechArt Group
        </p>
        <figure>
            <img class="cover place right" src="pictures/popart.jpg" alt="Iron Man Pop-art">
            <figcaption class="white">
                <a href="https://vagabondknight.deviantart.com/art/Iron-Man-Pop-Art-212725975">iamherecozidraw</a>
            </figcaption>
        </figure>

        <style>
            #cover {
                background-color: #A9F7F7;
            }

            #cover h2 {
                margin: 0 0 20px;
                font-size: 70px;
                color: white;
                text-shadow: 1px 2px 0 black;
            }

            #cover hr {
                margin: 0;
                border: none;
                border-top: 1px solid #DDAF25;
                padding: 0;
                width: 250px;
            }

            #cover p {
                margin: 20px 0 0 0;
                font-size: 20px;
                color: #000000;
            }

            #cover p a {
                color: #C10D0E;
            }
        </style>
    </section>

    <section class="slide" id="about">
        <img class="cover" src="pictures/me.jpg" alt="Никита Дубко">
        <div class="info">
            <h2>Никита Дубко</h2>
            <ul>
                <li>Software Engineer в iTechArt;</li>
                <li>адепт философии Pure CSS Images;</li>
                <li>люблю разбирать код из будущего.</li>
            </ul>
        </div>

        <style>
            #about .info {
                margin-left: 50%;
            }
        </style>
    </section>

    <section class="slide">
        <h2>Как пройти в библиотеку?</h2>
        <table>
            <tr>
                <th>Императивный подход</th>
                <th>Декларативный подход</th>
            </tr>
            <tr style="line-height: 1.3em;">
                <td style="padding-right: 1em;">
                    <ol>
                        <li>Выйти из здания, повернуть направо.</li>
                        <li>Дойти до станции метро "Первомайская".</li>
                        <li>Сесть на поезд до станции "Купаловской" и доехать до нее.</li>
                        <li>Перейти на Московскую ветку.</li>
                        <li>Сесть на поезд до станции "Восток" и доехать до нее.</li>
                        <li>Выйти из метро направо по ходу движения.</li>
                        <li>Идти к огромному ромбокубооктаэдру.</li>
                    </ol>
                </td>
                <td>Адрес: город Минск, проспект Независимости 116</td>
            </tr>
        </table>
        <img src="./pictures/iron-man-thumb-up.png" class="next" alt="Thumb Up" style="position: absolute; bottom: 20px; right: 40px; width: 300px;">
    </section>

    <section class="slide">
        <h2>Хотелки</h2>​
        <ul>
            <li class="next">Расширение кода сторонних библиотек</li>
            <li class="next">Множественное наследование</li>
            <li class="next">Компонентный подход</li>
            <li class="next">Метапрограммирование</li>
        </ul>

        <footer>
            <p>У каждого разработчика есть список каких-то возможностей, которые он очень хочет использовать, но ограничения
                языка или среды выполнения не позволяют это сделать. Для меня в JavaScript это возможность вмешиваться в
                уже написанный код без особых заморочек и обилия сложностей.
            </p>
        </footer>
    </section>

    <section class="slide">
        <img src="./pictures/underscore.png" alt="Underscore.js" style="height: 50px;">
        <pre><code class="language-javascript">var fibonacci = _.memoize(function(n) {
    return n < 2 ? n: fibonacci(n - 1) + fibonacci(n - 2);
});

var throttled = _.throttle(updatePosition, 100);
window.addEventListener('scroll', throttled);</code></pre>
        <img src="./pictures/cane.jpg" alt="Cane" class="place cover bottom right">

        <footer>
            <p>Раньше, чтобы расширить существующий код, активно применялись "обертки" над функцими или объектами, которые добавляли
                им дополнительную функциональность.</p>
            <p>Некоторые "обертки" были настолько популярными и общеупотребимыми, что начали появляться целые библиотеки с самыми
                распространенными подходами. Например,
                <a href="http://underscorejs.org/">underscore.js</a>.</p>
        </footer>
    </section>

    <section class="slide">
        <img src="./pictures/lodash.png" alt="Lodash" style="height: 50px;">
        <pre><code class="language-javascript">var abc = function(a, b, c) {
    return [a, b, c];
};
var curried = _.curry(abc);
curried(1)(2)(3); // => [1, 2, 3]

_.delay(function(text) {
    console.log(text);
}, 1000, 'later');</code></pre>
        <img src="./pictures/cool-cane.jpg" style="height: 70%;" alt="Cool Cane" class="place cover bottom right">

        <footer>
            <p>Постепенно подходов становилось все больше, появился
                <a href="https://lodash.com/">lodash</a>, который значительно ускоряет разработку, имеет хорошую документацию и до сих пор развивается.</p>
        </footer>
    </section>

    <section class="slide">
        <img src="./pictures/es6.png" alt="ES6" style="height: 50px;">
        <pre><code class="language-javascript">var handler = {
    get: function(target, name) {
        return (name in target) ? target[name] : 42;
    }
};
var p = new Proxy({}, handler);
p.a = 1;
console.log(p.a, p.b); // 1, 42</code></pre>
        <img src="./pictures/exoskeleton.png" style="height: 70%; transform: scaleX(-1);" alt="Cool Cane" class="place cover bottom right">

        <footer>
            <p>К сожалению, функции-обертки не только тянут за собой лишние зависимости, но и замедляют работу кода. А настоящего
                метапрограммирования они все равно не позволяют, так как используют ограниченные возможности языка.</p>
            <p>В стандарте ES6 разработчикам дали новые API,
                <b>Reflect</b> и
                <b>Proxy</b>, которые позволяют добавлять существующему коду дополнительные возможности во время исполнения.
                Однако подобные манипуляции делают код менее читаемым, сложным для понимания и громоздким, хоть и дает больше
                возможностей.
            </p>
        </footer>
    </section>

    <section class="slide">
        <div style="display: flex; align-items: flex-start; margin-top: 50px;">
            <img src="./pictures/wikipedia.svg" alt="Wikipedia" style="margin-right: 20px;">
            <p>
                <b>​Декоратор (англ. Decorator)</b> — структурный шаблон проектирования, предназначенный для динамического подключения
                дополнительного поведения к объекту. Шаблон Декоратор предоставляет гибкую альтернативу практике создания
                подклассов с целью расширения функциональности.
            </p>
        </div>

        <footer>
            <p>Чтобы решить проблему расширения функциональности существующего кода, умные люди целый паттерн придумали, назвали
                <b>"Декоратор"</b>. Суть его можно выразить так:
                <i>"обертываем подарок, кладем его в коробку, обертываем коробку"</i>.
            </p>
        </footer>
    </section>

    <section class="slide slide-pattern number-off">
        <h2>Паттерн «Декоратор»</h2>
        <pre><code class="language-javascript">


class TonyStark {
    constructor() {
        this.isBillionaire = true;
        this.isPlayboy = true;
        this.isPhilanthropist = true;
    }
}</code></pre>
        <div class="visual">
            <img src="./pictures/ironman-animation.jpg" alt="Tony Stark">
        </div>

        <style>
            .slide-pattern .visual {
                background: #B1B3B2;
                position: absolute;
                right: 0;
                top: 0;
                height: 100%;
                width: 30%;
            }

            .slide-pattern .visual img {
                clip-path: polygon(20% 0%, 80% 0%, 80% 90%, 20% 90%);
                max-width: 100%;
                transform: translateY(25%) scale(1.5);
            }
        </style>
    </section>

    <section class="slide slide-pattern number-off">
        <h2>Паттерн «Декоратор»</h2>
        <pre><code class="language-javascript">@Avenger
@Armor('Mark III')
@Assistant('J.A.R.V.I.S')
class TonyStark {
    constructor() {
        this.isBillionaire = true;
        this.isPlayboy = true;
        this.isPhilanthropist = true;
    }
}</code></pre>
        <div class="visual">
            <img src="./pictures/ironman-animation.gif" alt="Iron Man animation">
        </div>
    </section>

    <section class="slide slide-captain-america number-off">
        <h2>Паттерн «Декоратор»</h2>
        <pre><code class="language-javascript">@Avenger
@Armor('Captain Iron')
class StevenRogers {
    constructor() {
        this.isLeader = true;
        this.equipment = [
            new VibraniumShield(),
            new VibraniumHelmet()
        ];
    }
}</code></pre>
        <div class="visual"></div>

        <style>
            .slide-captain-america .visual {
                background: url(./pictures/captain-america-iron.jpg);
                position: absolute;
                right: 0;
                top: 0;
                width: 45%;
                height: 100%;
                background-position: center;
                background-repeat: no-repeat;
                background-size: cover;
            }
        </style>
    </section>

    <section class="slide slide-hulk number-off">
        <h2>Паттерн «Декоратор»</h2>
        <pre><code class="language-javascript">@Avenger
@Armor('Iron Hulk')
class BruceBanner {
    constructor() {
        this.isAngry = false;
    }
    toggle() {
        this.isAngry = !this.isAngry;
    }
    get isSmart() {
        return !this.isAngry;
    }
}</code></pre>
        <div class="visual"></div>

        <style>
            .slide-hulk .visual {
                background: url(./pictures/hulk-iron.jpg);
                position: absolute;
                right: 0;
                top: 0;
                width: 45%;
                height: 100%;
                background-position: center;
                background-repeat: no-repeat;
                background-size: cover;
            }
        </style>
    </section>

    <section class="slide">
        <h2>C# — атрибуты</h2>
        <pre><code class="language-csharp">public class Person
{
    [Display(Name = "Имя")]
    [Required()]
    public string FirstName { get; set; }

    [Display(Name = "Отчество")]
    public string Patronym { get; set; }
}</code></pre>
    </section>

    <section class="slide">
        <h2>Java — аннотации</h2>
        <pre><code class="language-java">@Service("testBean")
@Scope("singleton")
public class TestBean {
    private String data = "I am a singleton!!";

    public String getData() {
        return data;
    }
}</code></pre>
    </section>

    <section class="slide">
        <h2>Python — декораторы</h2>
        <pre><code class="language-python">def makebold(fn):
    def wrapped():
        return &#x22;&#x3C;b&#x3E;&#x22; + fn() + &#x22;&#x3C;/b&#x3E;&#x22;
    return wrapped

@makebold
def hello():
    return "hello world"</code></pre>
    </section>

    <section class="slide">​ Предложение tc39 Иегуда Кац https://github.com/tc39/proposal-decorators/blob/master/TAXONOMY.md
    </section>

    <section class="slide">
        Types of Decorators - Method Decorator - Property Decorators - Class Decorator - Parameter Decorator
    </section>

    <section class="slide">​ синтаксис</section>

    <section class="slide">
        https://github.com/wycats/javascript-decorators
    </section>

    <section class="slide">​ к чему применяется</section>

    <section class="slide">
        Декоратор применяется тогда, когда объявляется код
    </section>

    <section class="slide">
        <h2 class="shout" style="font-size: 70px;">Object.getOwnPropertyDescriptor()</h2>
    </section>

    <section class="slide">
        <div style="display: flex;">
            <pre style="flex: 1 1 auto;"><code class="language-javascript">const meetup = {
    name: 'MinskJS',
    number: 3
};
</code></pre>
            <pre class="next"><code class="language-javascript">const meetup = Object.defineProperties({}, {
    name: {
        value: 'MinskJS',
        writable: true,
        enumerable: true,
        configurable: true
    },
    number: {
        value: 3,
        writable: true,
        enumerable: true,
        configurable: true
    }
});</code></pre>
        </div>
    </section>

    <section class="slide">
        <pre><code class="language-javascript">const obj = {
    get getter() { return 42; },
    property: true,
    method: function() {
        return "I am the method";
    }
};

['getter', 'property', 'method'].forEach(p => {
    console.log(
        Object.getOwnPropertyDescriptor(obj, p)
    );
});</code></pre>
    </section>

    <section class="slide">​ Во что разворачивается</section>

    <section class="slide">​ Порядок применения</section>

    <section class="slide">​ Что возвращает</section>

    <section class="slide">​ Аккуратно с возвращаемыми значениями, можно затереть другие результаты</section>

    <section class="slide">​ Примеры использования</section>

    <section class="slide">​ angular</section>

    <section class="slide">​ typescript</section>

    <section class="slide">​ свои примеры</section>

    <section class="slide">​ Как начать использовать прямо сейчас</section>

    <section class="slide">​ tsconfig.json
        <pre>
                {
                    "compilerOptions": {
                    "experimentalDecorators": true,
                    "emitDecoratorMetadata": true
                    }
                    }
        </pre>
    </section>

    <section class="slide">
        https://github.com/jayphelps/core-decorators For Properties and Methods @readonly @nonconfigurable @decorate @extendDescriptor
        For Properties @nonenumerable @lazyInitialize For Methods @autobind @deprecate @suppressWarnings @enumerable @override
        @time @profile For Classes @autobind
    </section>

    <section class="slide">
        import { autobind } from 'core-decorators'; class Person { @autobind getPerson() { return this; } } let person = new Person();
        let { getPerson } = person; getPerson() === person; // true
    </section>

    <section class="slide">
        https://www.npmjs.com/package/lodash-decorators

    </section>

    <section class="slide">
        import { Debounce, Memoize } from 'lodash-decorators'; class Person { constructor(firstName, lastName) { this.firstName =
        firstName; this.lastName = lastName; } @Debounce(100) save(date) { return this.httpService.post(data); } @Memoize(item
        => item.id) doSomeHeavyProcessing(arg1, arg2) {} }
    </section>

    <section class="slide">
        import { Mixin } from 'lodash-decorators'; const MyOtherApi = { someCoolMethod() { // Do something cool } }; @Mixin(MyOtherApi)
        class Person {} Person.prototype.someCoolMethod === MyOtherApi.someCoolMethod; // => true
    </section>

    <section class="slide">
        function checkPermissionDecorator(f) { return function() { if (isAdmin()) { return f.apply(this, arguments); } else { callThePolice();
        } } }
    </section>

    <section class="slide">
        https://www.youtube.com/user/andrew8088/videos Andrew Burgess
    </section>

    <section class="slide">
        https://github.com/babel/babel/milestone/14
    </section>

    <section class="slide">​ babel-плагины:
        <br>​ https://www.npmjs.com/package/babel-plugin-transform-decorators-legacy
        <br> https://www.npmjs.com/package/babel-plugin-transform-decorators
    </section>

    <section class="slide">​ браузерная поддержка http://kangax.github.io/compat-table/esnext/
    </section>

    <section class="slide">
        https://github.com/tc39/proposals/blob/master/README.md


    </section>

    <section class="slide">
        1. Избегать мутаций 2. Пишите простые и мелкие декораторы 3. Следите за стандартом
    </section>

    <section class="slide">
        <h2 style="margin-bottom:0.2em;">Материалы</h2>
        <ul>
            <li><a href="https://medium.com/google-developers/exploring-es7-decorators-76ecb65fb841">Exploring EcmaScript Decorators</a> — Addy Osmani</li>
            <li><a href="https://www.sitepoint.com/javascript-decorators-what-they-are/">JavaScript Decorators: What They Are and When to Use Them</a> — Graham Cox</li>
            <li><a href="https://cabbageapps.com/fell-love-js-decorators/">How I Fell in Love with JS Decorators</a> — Ragularuban Nanthagopal</li>
        </ul>
        <h2 style="margin-bottom:0.2em;">Видео</h2>
        <ul>
            <li><a href="https://www.youtube.com/watch?v=VIG6e7uYDG4">Распечатай Яндекс.Карты</a> — Вадим Макишвили</p></li>
        </ul>
    </section>

    <section class="slide">
        <h2>Спасибо за внимание!</h2>
        <p>
            <a href="https://mefody.github.io/talks/js-decorators/">mefody.github.io/talks/js-decorators/</a>
            <br>
            <a href="https://twitter.com/dark_mefody">@dark_mefody</a>
            <br>
            <a href="mailto:n.a.dubko@gmail.com">n.a.dubko@gmail.com</a>
        </p>
        <img src="./pictures/qr-code.gif" width="250" alt="QR code — ссылка на презентацию" class="place bottom right">
    </section>


    <footer class="badge">
        <a href="https://github.com/shower/shower">Powered by Shower</a>
    </footer>

    <div class="progress"></div>

    <script src="../src/shower/shower.min.js"></script>
    <script src="../src/prism/prism.min.js"></script>

</body>

</html>
